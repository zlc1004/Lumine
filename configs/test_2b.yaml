# Lumine Test Config - Qwen2-VL-2B
# For local testing with 4070 Super (12GB VRAM)

model:
  model_path: models/Qwen2-VL-2B-Base
  attn_implementation: flash_attn

data:
  train_path: configs/data_pretrain.yaml
  chat_template: qwen2vl
  max_seq_len: 4096
  train_size: 100000
  datasets_type: mapping
  mm_configs:
    image_max_pixels: 262144
    video_max_pixels: 262144
    max_frames: 8
    fps: 2.0

train:
  output_dir: output/test_2b
  data_parallel_mode: fsdp2
  wandb_project: lumine
  wandb_name: test_2b
  rmpad: false
  rmpad_with_pos_ids: true
  ulysses_parallel_size: 1
  freeze_vit: false
  lr: 1.0e-5
  init_device: meta
  lr_decay_style: cosine
  num_train_epochs: 1
  micro_batch_size: 1
  global_batch_size: 1
  max_steps: 50
  save_steps: 25
  save_epochs: 1
  save_hf_weights: true
  enable_gradient_checkpointing: true
  enable_fsdp_offload: true
  enable_activation_offload: true
